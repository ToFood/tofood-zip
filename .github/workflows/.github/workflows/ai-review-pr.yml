# Workflow para revis√£o de Pull Requests utilizando IA
name: ü§ñ AI Review PR

on:
  pull_request:
    types: [opened, synchronize] # A√ß√£o disparada em PRs abertos e sincronizados

# Permiss√µes necess√°rias para o workflow
permissions:
  pull-requests: write # Permite alterar PRs, como adicionar coment√°rios
  contents: write      # Necess√°rio para acessar e ler o conte√∫do do reposit√≥rio

# Defini√ß√£o do job principal para revis√£o de PRs
jobs:
  ai-review-pr:
    name: ü§ñ AI Review PR # Nome do job exibido no GitHub Actions
    runs-on: ubuntu-latest # Runner utilizado para executar o workflow

    steps:

      # Exibir Provedor e Modelo de IA
      - name: üé≠ Provider
        run: |
          echo "AI: ${{ vars.AI_PROVIDER }}"
          echo "Model: ${{ vars.AI_MODEL }}"

      # Exibir o Prompt
      - name: üìù Prompt
        run: |
          echo "${{ vars.AI_PROMPT }}" | cat


      - name: üîéPR Review
        uses: ohntrebor/raico/.github/actions/review-pr@main # A√ß√£o que executa a revis√£o de PR
        with:
          ai_provider: ${{ vars.AI_PROVIDER }}      # Nome do provedor de IA (vari√°vel do reposit√≥rio)
          ai_api_key: ${{ secrets.AI_API_KEY }}     # API Key configurada nos secrets do reposit√≥rio
          ai_model: ${{ vars.AI_MODEL }}            # Modelo de IA (vari√°vel do reposit√≥rio)
          ai_version: ${{ vars.AI_VERSION }}        # Vers√£o da API (vari√°vel do reposit√≥rio)
          github_token: ${{ secrets.GITHUB_TOKEN }} # Token de autentica√ß√£o padr√£o do GitHub Actions
          review_type: ${{ vars.AI_REVIEW_TYPE }}   # Tipo de revis√£o (1 = por arquivo, 2 = por altera√ß√µes)
          prompt: ${{ vars.AI_PROMPT }}             # Prompt de instru√ß√µes enviado para a IA
